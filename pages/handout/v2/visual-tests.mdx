import Layout from "@templates/layout"

export default Layout
export const meta = { title: "Visual Regression Testing", path: "v2" }


You can optionally run visual regression tests for your components and storybook pages. We suggest to use either [Creevey](https://github.com/wKich/creevey) or [Loki](https://loki.js.org/) for this purpose.  Both already installed in _design-system_ workspace.


## Creevey

Running creevey requires Docker to be installed. Creevey provides a UI for previewing and managing component tests.


First make sure the storybook already running, or if not, run it:

```
yarn design-system
```

Then run in __separate__ terminal window:

```
yarn test:creevey:runner
```

A UI will open. Follow the interface to run the tests.


Creevey is also configured to run as a workflow of Github actions. It will be triggered every time you push changes in `design-system/src` folder. You can view test results in Actions tab of yuor repo

#### Credits to [Dmitriy Lazarev](https://www.linkedin.com/in/dmitriy-lazarev-5b2150a3/) for the Creevey setup and support.

## Loki

If you prefer more simple setup, you can use Loki. Loki prints test results to the console and stores refrence file in .loki folder at _design-system_ workspace.


Make sure the storybook already running:

```
yarn design-system
```

Then run in __separate__ terminal window:

```
yarn test:loki
```

__By default the tests are configured for chrome desktop and mobile only. [Refer to documentation](https://loki.js.org/configuration.html) if you want to extend your configuration.__

You'll see the status of your tests in the console. If the test fail, you can check diff images in `design-system/loki/diff`. You can update reference images by name (see tips in the console), or all together with

```
yarn test:loki:approve
```


If you want to update all tests at once, you can run:
```
yarn test:loki:update
```
